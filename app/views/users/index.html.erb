<div class="container">
  <div class="row">
      <div class="col-lg-3">
         <h1>User info</h1>
         <%= attachment_image_tag @user, :profile_image, size:"60x60", format:"jpeg", fallback:"no_image.jpeg" %>
         <table class="table">
           <tbody>
             <tr>
               <th><label>name</label></th>
               <th><%= @user.name %></th>
             </tr>
             <tr>
               <th><label>Introduction</label></th>
               <th><%= @user.introduction %>
             </tr>
           </tbody>
         </table>
         <div class="row">
           <% if @user.id == current_user.id %>
             <%= link_to "", edit_user_path(current_user.id), class:"col-xs-12 btn btn-default glyphicon glyphicon-wrench" %>
           <% else %>
             <%= link_to users_path %>
           <% end %>
         </div>
         <h3>New book</h3>
           <%= form_for(@book) do |f| %>
	     <% if @book.errors.any? %>
                <%= @book.errors.count %>件のエラーが発生しました
                <% @book.errors.full_messages.each do |message| %>
                  <%= message %>
                <% end %>
             <% end %>
             <div class="field row">
               <label>Title</label>
                 <%= f.text_field :title, class:"col-xs-12 book_title" %>
             </div>
             <div class="field row">
               <label>Opinion</label>
                 <%= f.text_area :body, class:"col-xs-12 book_body" %>
             </div>
             <div class="actions row">
               <%= f.submit "Create Book", class:"btn btn-primary col-xs-12" %>
             </div>
           <% end %>
        </div>
        <div class="col-lg-9">
	  <h2>gmap</h2>
	  <input id="address" type="textbox" value="Sydney, NSW">
	  <input type="button" value="Encode" onclick="codeAddress()">
	  <div id="map">
	  </div>

	  <style>
	    #map{
	      height:400px;
	    }
	  </style>
	  <script>
	    let map
	    let geocoder

	    function initMap(){
	      geocoder = new google.maps.Geocoder()

	      map = new google.maps.Map(document.getElementById('map'), {
	      center: {lat: -34.397, lng: 150.644},
	      zoom: 8
	      });
	    }
	  function codeAddress(){
	    let inputAddress = document.getElementById('address').value;

	    geocoder.geocode( { 'address': inputAddress}, function(results, status) {
	      if (status == 'OK') {
	        map.setCenter(results[0].geometry.location);
		
		var marker = new google.maps.Marker({
		  map: map,
		  position: results[0].geometry.location
		});
	      } else {
	        alert('Geocode was not successful for the following reason: ' + status);
	      }
	    });
	  }
	  </script>
	  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgK_s7PsMh7pwWUS3Fp2TV7HTQ8897FUE&callback=initMap" async defer></script>
	  <h1>User</h1>
	    <table class="table table-hover table-inverse">
	      <thead>
	        <tr>
		  <th>image</th>
		  <th>name</th>
		  <th colspan="3"></th>
	        </tr>
	      </thead>
	      <tbody>
	        <% @users.each do |user| %>
		  <tr>
		    <td><%= attachment_image_tag user, :profile_image, size:"60x60", format:"jpg", fallback:"no_image.jpg" %></td>
		    <td><%= user.name %></td>
		    <td><%= link_to "Show", user_path(user.id) %></td>
		  </tr>
	        <% end %>
	       </tbody>
	     </table>
        </div>"
  </div>
</div> 
<footer>
  <div class="container">
    <div class="row">
      <div class="col-xs-3 col-xs-offset-9">
        <p>CopyRight Infratop.inc</p>
      </div>
    </div>
  </div>
</footer>
<!-- , fallback:"no_image.jpg" -->
